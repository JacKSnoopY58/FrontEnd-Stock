import{_ as m,c as l,a as s,t as i,C as p,n as a,v as n,d as g,o as d}from"./Bpht06DM.js";import{a as u}from"./upsvKRUO.js";import{a as b}from"./Cz0CWeBA.js";const y={class:"flex justify-center items-center h-screen bg-gray-100 p-5 sm:p-5"},w={class:"w-96 bg-white shadow-md rounded-lg p-6"},f={class:"text-2xl font-bold mb-4 text-center"},h={class:"mb-4"},v={class:"mb-4"},D={class:"mb-4"},k={class:"mb-4"},L={class:"mb-4"},U={class:"mb-4"},x={class:"text-center mt-4"},V={data(){return{isLogin:!0,logindata:{username:"",password:""},registerData:{username:"",password:"",firstname:"",lastname:"",role:"employee"},clearregisterData:{username:"",password:"",firstname:"",lastname:"",role:"employee"},errorMessage:""}},methods:{async login(){if(!this.logindata.username||!this.logindata.password){alert("Please fill in both username and password.");return}console.log("Login data:",this.logindata);try{const{data:o}=await u.post("https://project-stock.onrender.com/api/login",{username:this.logindata.username,password:this.logindata.password});b.set("token",o.token),o.role==="admin"?this.$router.push("/admin/homepage"):this.$router.push("/employee/homepage")}catch(o){console.error("Login error:",o)}},async register(){console.log("Register data:",this.registerData);try{const{data:o}=await u.post("https://project-stock.onrender.com/api/register",this.registerData);o&&(this.$router.push("/login"),this.registerData={...this.clearregisterData})}catch(o){console.error("Register error:",o),o.response&&o.response.data&&(this.errorMessage=o.response.data.message||"เกิดข้อผิดพลาดในการลงทะเบียน")}}}},E=Object.assign(V,{__name:"login",setup(o){return(r,e)=>(d(),l("div",y,[s("div",w,[s("h2",f,i(r.isLogin?"Login":"Sign Up"),1),r.isLogin?(d(),l("form",{key:0,onSubmit:e[2]||(e[2]=p((...t)=>r.login&&r.login(...t),["prevent"]))},[s("div",h,[e[9]||(e[9]=s("label",{class:"block text-gray-700"},"Username",-1)),a(s("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>r.logindata.username=t),class:"w-full px-4 py-2 border rounded-md",placeholder:"Enter your username",required:""},null,512),[[n,r.logindata.username]])]),s("div",v,[e[10]||(e[10]=s("label",{class:"block text-gray-700"},"Password",-1)),a(s("input",{type:"password","onUpdate:modelValue":e[1]||(e[1]=t=>r.logindata.password=t),class:"w-full px-4 py-2 border rounded-md",placeholder:"Enter your password",required:""},null,512),[[n,r.logindata.password]])]),e[11]||(e[11]=s("button",{type:"submit",class:"w-full bg-blue-500 text-white py-2 rounded-md"}," Login ",-1))],32)):(d(),l("form",{key:1,onSubmit:e[7]||(e[7]=p((...t)=>r.register&&r.register(...t),["prevent"]))},[s("div",D,[e[12]||(e[12]=s("label",{class:"block text-gray-700"},"First Name",-1)),a(s("input",{type:"text","onUpdate:modelValue":e[3]||(e[3]=t=>r.registerData.firstname=t),class:"w-full px-4 py-2 border rounded-md",placeholder:"Enter your first name",required:""},null,512),[[n,r.registerData.firstname]])]),s("div",k,[e[13]||(e[13]=s("label",{class:"block text-gray-700"},"Last Name",-1)),a(s("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=t=>r.registerData.lastname=t),class:"w-full px-4 py-2 border rounded-md",placeholder:"Enter your last name",required:""},null,512),[[n,r.registerData.lastname]])]),s("div",L,[e[14]||(e[14]=s("label",{class:"block text-gray-700"},"Username",-1)),a(s("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=t=>r.registerData.username=t),class:"w-full px-4 py-2 border rounded-md",placeholder:"Enter your username",required:""},null,512),[[n,r.registerData.username]])]),s("div",U,[e[15]||(e[15]=s("label",{class:"block text-gray-700"},"Password",-1)),a(s("input",{type:"password","onUpdate:modelValue":e[6]||(e[6]=t=>r.registerData.password=t),class:"w-full px-4 py-2 border rounded-md",placeholder:"Enter your password",required:""},null,512),[[n,r.registerData.password]])]),e[16]||(e[16]=s("button",{type:"submit",class:"w-full bg-green-500 text-white py-2 rounded-md"}," Sign Up ",-1))],32)),s("p",x,[g(i(r.isLogin?"Don't have an account?":"Already have an account?")+" ",1),s("button",{onClick:e[8]||(e[8]=t=>r.isLogin=!r.isLogin),class:"text-blue-500 underline"},i(r.isLogin?"Sign Up":"Login"),1)])])]))}}),j=m(E,[["__scopeId","data-v-b5f85c36"]]);export{j as default};
